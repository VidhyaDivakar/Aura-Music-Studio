<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio Blue Pro - Asset Platform</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#00A3FF">

    <!-- Dependencies: FontAwesome for Icons & Studio Styles -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- Header Section -->
    <header>
        <div class="brand">
            <i class="fa-solid fa-guitar"></i>
            <h2 style="margin:0">Studio <span style="color:white">Blue</span></h2>
        </div>
        <div class="search-box">
            <i class="fa fa-search"></i>
            <input type="text" id="search-box" placeholder="Search 120+ tones..." onkeyup="runSearch()">
        </div>
        <button id="rec-btn" onclick="handleRecording()"
            style="background:red; color:white; border:none; padding:10px 20px; border-radius:20px; font-weight:bold; cursor:pointer;">REC</button>
    </header>

    <!-- Main Tab Navigation -->
    <nav>
        <button class="tab-btn active" onclick="navTo(event, 'pane-studio')">Studio</button>
        <button class="tab-btn" onclick="navTo(event, 'pane-library')">Tone Library</button>
        <button class="tab-btn" onclick="navTo(event, 'pane-user')">User Saved Tones</button>
    </nav>

    <!-- Trending Genres Ribbon -->
    <div class="ribbon" id="genre-ribbon">
        <div class="genre-chip active" onclick="filterByGenre('All')">All Tones</div>
        <div class="genre-chip" onclick="filterByGenre('Gaming Classics')">Gaming Classics</div>
        <div class="genre-chip" onclick="filterByGenre('Viral Pop Snippets')">Viral Pop Snippets</div>
        <div class="genre-chip" onclick="filterByGenre('ASMR & Nature')">ASMR & Nature</div>
        <div class="genre-chip" onclick="filterByGenre('Retro & Lofi')">Retro & Lofi</div>
        <div class="genre-chip" onclick="filterByGenre('Minimalist UI')">Minimalist UI</div>
        <div class="genre-chip" onclick="filterByGenre('Cinematic Effects')">Cinematic Effects</div>
    </div>

    <!-- Main Viewport -->
    <div class="viewport">
        <!-- STUDIO PANE: Manual Keyboard Play -->
        <div id="pane-studio" class="tab-pane active">
            <div class="monitor">
                <div id="note-display">Ready to Compose</div>
                <div style="color:#444; font-size:12px; margin-top:10px;">64-KEY HIGH FIDELITY ENGINE</div>
            </div>
            <div class="keyboard-wrap">
                <div class="keys" id="piano-keys"></div>
            </div>
        </div>

        <!-- LIBRARY PANE: Searchable Tone Gallery -->
        <div id="pane-library" class="tab-pane">
            <div class="grid" id="lib-grid"></div>
        </div>

        <!-- USER PANE: Saved Recordings & Management -->
        <div id="pane-user" class="tab-pane">
            <div class="grid" id="user-grid"></div>
        </div>
    </div>

    <!-- 1. Load Tone Data First -->
    <script src="tones.js"></script>

    <!-- 2. Load App Logic Second -->
    <script src="app.js"></script>

    <!-- 3. Service Worker Registration (PWA Logic) -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('Studio Blue: Service Worker Registered'))
                    .catch(err => console.log('Studio Blue: Service Worker Failed', err));
            });
        }
    </script>
</body>

</html>